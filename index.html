<!DOCTYPE html>
    <head>
        <meta charset="utf-8">
        <title></title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
				<link rel="stylesheet" href="fonts/fonts.css">
				<script src="http://ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
				<link rel="stylesheet" href="css/main.css"
    </head>
		<body>
			<div id="main">
				<img id="tag" />
				<header>
					<h1>Adobe Lehi Summer Food Drive 2020</h1>
					<h2>Benefiting Tabitha's Way</h2>
				</header>
				<div class="column left">
					<div class="total">
						$0
					</div>
					<h3>TOTAL RAISED*</h3>
					<div id="how-it-works">
						<img id="matching" src="img/matching.png" />
						<ul>
							<li>$1 = a meal for a family of 4</li>
							<li>$5 = feeds a family of 4 for 2 days</li>
							<li>$10 = feeds one for almost 2 weeks</li>
							<li>$50 = feeds a family of 4 for 2 weeks</li>
						</ul>
					</div>
				</div>
				<div class="column">
					<div class="box-back"></div>
					<div class="cans">
						<div id="group1total" class="ribbon">$0</div>
						<div id="group1" class="can-tower"></div>
					</div>
					<div class="box-front"></div>
					<h4>Traverse/Floor 1</h4>
					<a href="https://adobe.benevity.org/campaigns/1464" class="donate">Donate!</a>
				</div>
				<div class="column">
					<div class="box-back"></div>
					<div class="cans">
						<div id="group2total" class="ribbon">$0</div>
						<div id="group2" class="can-tower"></div>
					</div>
					<div class="box-front"></div>
					<h4>Floor 2</h4>
					<a href="https://adobe.benevity.org/campaigns/366" class="donate">Donate!</a>
				</div>
				<div class="column">
					<div class="box-back"></div>
					<div class="cans">
						<div id="group3total" class="ribbon">$0</div>
						<div id="group3" class="can-tower"></div>
					</div>
					<div class="box-front"></div>
					<h4>Floor 3</h4>
					<a href="https://adobe.benevity.org/campaigns/405" class="donate">Donate!</a>
				</div>
				<div class="column">
					<div class="box-back"></div>
					<div class="cans">
						<div id="group4total" class="ribbon">$0</div>
						<div id="group4" class="can-tower"></div>
					</div>
					<div class="box-front"></div>
					<h4>Floor 4</h4>
					<a href="https://adobe.benevity.org/campaigns/406" class="donate">Donate!</a>
				</div>
			</div>
			<div id="footer">
				*Tabitha's Way stretches every $1 donated to $7 worth of goods and services. Additionally, all donations made here will be automatically matched by Adobe. The total reflects the stretch and the match.<br />Floor totals are calculated on a per-head-basis.
			</div>
		</body>
		<script type="text/javascript">
			var animDuration = 3000;

			var group1people = 380;
			var group2people = 351;
			var group3people = 341;
			var group4people = 341;

			var group1cash = 12333.08;
			var group2cash = 15561.9;
			var group3cash = 16561;
			var group4cash = 8632;

			var matchingFactor = 7;

			var group1 = group1cash / group1people;
			var group2 = group2cash / group2people;
			var group3 = group3cash / group3people;
			var group4 = group4cash / group4people;

			//var totalImpact = matchingFactor * (group1cash + group2cash + group3cash + group4cash);
			var totalImpact = 725731.72;

			function animateNumber(destination, element) {
				$({numberValue: 0}).animate({numberValue: destination}, {
					duration: animDuration,
					easing: 'swing',
					step: function() {
						element.text('$' + this.numberValue.toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g, ","));
					},
					complete: function() {
						element.text('$' + destination.toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g, ","));
					}
				});
			}


			var stackHeight = 530; /* see .can-tower top */
			var endDate = new Date(2020, 05, 31);
			var today = new Date();
			var daysRemaining = Math.floor((endDate.getTime() - today.getTime())/1000/86400);
			if(daysRemaining < 0) {
				daysRemaining = 0;
			}

			var driveLengthinDays = 31;
			var groupMax = Math.max(group1, group2, group3, group4);

			// We used to show this based on drive progress.
			//var todayMaxPercent = (driveLengthinDays - daysRemaining) / driveLengthinDays;
			var todayMaxPercent = 0.9;

			var group1Pos = (stackHeight * todayMaxPercent) * (group1/groupMax);
			var group2Pos = (stackHeight * todayMaxPercent) * (group2/groupMax);
			var group3Pos = (stackHeight * todayMaxPercent) * (group3/groupMax);
			var group4Pos = (stackHeight * todayMaxPercent) * (group4/groupMax);

			if(group1 == 0) {
				$('#group1, #group1total').hide();
			} else {
				$('#group1').animate({top:stackHeight - group1Pos}, animDuration, 'swing');
				$('#group1total').animate({top:stackHeight - group1Pos + 25, opacity:1}, animDuration, 'swing');
			}
			if(group2 == 0) {
				$('#group2, #group2total').hide();
			} else {
				$('#group2').animate({top:stackHeight - group2Pos}, animDuration, 'swing');
				$('#group2total').animate({top:stackHeight - group2Pos + 25, opacity:1}, animDuration, 'swing');
			}
			if(group3 == 0) {
				$('#group3, #group3total').hide();
			} else {
				$('#group3').animate({top:stackHeight - group3Pos}, animDuration, 'swing');
				$('#group3total').animate({top:stackHeight - group3Pos + 25, opacity:1}, animDuration, 'swing');
			}
			if(group4 == 0) {
				$('#group4, #group4total').hide();
			} else {
				$('#group4').animate({top:stackHeight - group4Pos}, animDuration, 'swing');
				$('#group4total').animate({top:stackHeight - group4Pos + 25, opacity:1}, animDuration, 'swing');
			}

			animateNumber(totalImpact, $('.column .total'));
			animateNumber(group1, $('#group1total'));
			animateNumber(group2, $('#group2total'));
			animateNumber(group3, $('#group3total'));
			animateNumber(group4, $('#group4total'));
		</script>
</html>

